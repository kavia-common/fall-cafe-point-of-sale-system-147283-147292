{"is_source_file": true, "format": "JavaScript", "description": "This file defines a React context provider, hooks, and reducer logic for managing a shopping cart state within a front-end React application. It handles adding/removing items, updating quantities, setting notes, and calculating totals including tax. It also persists the cart state in session storage.", "external_files": ["react"], "external_methods": ["React.createContext", "React.useContext", "React.useEffect", "React.useMemo", "React.useReducer", "React.useRef"], "published": ["CartProvider", "useCart", "useCartDispatch"], "classes": [], "methods": [{"name": "readCartFromSession()", "description": "Reads and parses the cart data from session storage, returning null if invalid or not present.", "scope": "", "scopeKind": ""}, {"name": "writeCartToSession(state)", "description": "Serializes the cart state and saves it to session storage.", "scope": "", "scopeKind": ""}, {"name": "validateItem(item)", "description": "Validates that a cart item object has required properties and correct types.", "scope": "", "scopeKind": ""}, {"name": "cartReducer(state, action)", "description": "Reducer function handling cart-related actions to update state accordingly.", "scope": "", "scopeKind": ""}, {"name": "sumLineItemsCents(items)", "description": "Computes the total line item amount in cents.", "scope": "", "scopeKind": ""}, {"name": "computeTaxCents(subtotalCents, rateBps = DEFAULT_TAX_RATE_BPS)", "description": "Calculates tax in cents based on subtotal and tax rate in basis points.", "scope": "", "scopeKind": ""}, {"name": "CartProvider({ children })", "description": "React component providing cart context, managing state, actions, and persistence.", "scope": "", "scopeKind": ""}, {"name": "useCart()", "description": "Hook exposing cart state, totals, and item accessors + actions.", "scope": "", "scopeKind": ""}, {"name": "useCartDispatch()", "description": "Hook exposing raw dispatch function for cart actions.", "scope": "", "scopeKind": ""}], "calls": ["sessionStorage.getItem", "sessionStorage.setItem", "JSON.parse", "JSON.stringify", "Math.round", "Array.prototype.findIndex", "Array.prototype.filter", "Array.prototype.reduce", "useContext", "useReducer", "useEffect", "useMemo", "useRef"], "search-terms": ["cartContext", "shopping cart reducer", "session storage cart", "React context cart", "cart item validation", "calculate total with tax", "cart actions add remove", "cart totals hooks"], "state": 2, "file_id": 20, "knowledge_revision": 48, "git_revision": "80bc4e4ef7889f63bee39ee9b68241d666e4fb62", "ctags": [{"_type": "tag", "name": "ACTIONS", "path": "/home/kavia/workspace/code-generation/fall-cafe-point-of-sale-system-147283-147292/pos_frontend/src/state/cartContext.js", "pattern": "/^const ACTIONS = {$/", "language": "JavaScript", "kind": "class"}, {"_type": "tag", "name": "ADD_ITEM", "path": "/home/kavia/workspace/code-generation/fall-cafe-point-of-sale-system-147283-147292/pos_frontend/src/state/cartContext.js", "pattern": "/^  ADD_ITEM: 'ADD_ITEM',$/", "language": "JavaScript", "kind": "property", "scope": "ACTIONS", "scopeKind": "class"}, {"_type": "tag", "name": "BPS_SCALE", "path": "/home/kavia/workspace/code-generation/fall-cafe-point-of-sale-system-147283-147292/pos_frontend/src/state/cartContext.js", "pattern": "/^const BPS_SCALE = 10000; \\/\\/ 10000 = 100.00%$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "CLEAR", "path": "/home/kavia/workspace/code-generation/fall-cafe-point-of-sale-system-147283-147292/pos_frontend/src/state/cartContext.js", "pattern": "/^  CLEAR: 'CLEAR',$/", "language": "JavaScript", "kind": "property", "scope": "ACTIONS", "scopeKind": "class"}, {"_type": "tag", "name": "CartDispatchContext", "path": "/home/kavia/workspace/code-generation/fall-cafe-point-of-sale-system-147283-147292/pos_frontend/src/state/cartContext.js", "pattern": "/^const CartDispatchContext = createContext(undefined);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "CartProvider", "path": "/home/kavia/workspace/code-generation/fall-cafe-point-of-sale-system-147283-147292/pos_frontend/src/state/cartContext.js", "pattern": "/^export function CartProvider({ children }) {$/", "language": "JavaScript", "kind": "function", "signature": "({ children })"}, {"_type": "tag", "name": "CartStateContext", "path": "/home/kavia/workspace/code-generation/fall-cafe-point-of-sale-system-147283-147292/pos_frontend/src/state/cartContext.js", "pattern": "/^const CartStateContext = createContext(undefined);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "DECREMENT", "path": "/home/kavia/workspace/code-generation/fall-cafe-point-of-sale-system-147283-147292/pos_frontend/src/state/cartContext.js", "pattern": "/^  DECREMENT: 'DECREMENT',$/", "language": "JavaScript", "kind": "property", "scope": "ACTIONS", "scopeKind": "class"}, {"_type": "tag", "name": "DEFAULT_TAX_RATE_BPS", "path": "/home/kavia/workspace/code-generation/fall-cafe-point-of-sale-system-147283-147292/pos_frontend/src/state/cartContext.js", "pattern": "/^const DEFAULT_TAX_RATE_BPS = 887.5; \\/\\/ basis points with 1 decimal (8.875% -> 887.5)$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "INCREMENT", "path": "/home/kavia/workspace/code-generation/fall-cafe-point-of-sale-system-147283-147292/pos_frontend/src/state/cartContext.js", "pattern": "/^  INCREMENT: 'INCREMENT',$/", "language": "JavaScript", "kind": "property", "scope": "ACTIONS", "scopeKind": "class"}, {"_type": "tag", "name": "REMOVE_ITEM", "path": "/home/kavia/workspace/code-generation/fall-cafe-point-of-sale-system-147283-147292/pos_frontend/src/state/cartContext.js", "pattern": "/^  REMOVE_ITEM: 'REMOVE_ITEM',$/", "language": "JavaScript", "kind": "property", "scope": "ACTIONS", "scopeKind": "class"}, {"_type": "tag", "name": "SET_NOTE", "path": "/home/kavia/workspace/code-generation/fall-cafe-point-of-sale-system-147283-147292/pos_frontend/src/state/cartContext.js", "pattern": "/^  SET_NOTE: 'SET_NOTE',$/", "language": "JavaScript", "kind": "property", "scope": "ACTIONS", "scopeKind": "class"}, {"_type": "tag", "name": "STORAGE_KEY", "path": "/home/kavia/workspace/code-generation/fall-cafe-point-of-sale-system-147283-147292/pos_frontend/src/state/cartContext.js", "pattern": "/^const STORAGE_KEY = 'fc_pos_cart_v1';$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "cartReducer", "path": "/home/kavia/workspace/code-generation/fall-cafe-point-of-sale-system-147283-147292/pos_frontend/src/state/cartContext.js", "pattern": "/^function cartReducer(state, action) {$/", "language": "JavaScript", "kind": "function", "signature": "(state, action)"}, {"_type": "tag", "name": "computeTaxCents", "path": "/home/kavia/workspace/code-generation/fall-cafe-point-of-sale-system-147283-147292/pos_frontend/src/state/cartContext.js", "pattern": "/^function computeTaxCents(subtotalCents, rateBps = DEFAULT_TAX_RATE_BPS) {$/", "language": "JavaScript", "kind": "function", "signature": "(subtotalCents, rateBps = DEFAULT_TAX_RATE_BPS)"}, {"_type": "tag", "name": "contextValue", "path": "/home/kavia/workspace/code-generation/fall-cafe-point-of-sale-system-147283-147292/pos_frontend/src/state/cartContext.js", "pattern": "/^    <CartStateContext.Provider value={contextValue}>$/", "language": "JavaScript", "kind": "field", "scope": "Provider", "scopeKind": "class"}, {"_type": "tag", "name": "initialState", "path": "/home/kavia/workspace/code-generation/fall-cafe-point-of-sale-system-147283-147292/pos_frontend/src/state/cartContext.js", "pattern": "/^const initialState = {$/", "language": "JavaScript", "kind": "class"}, {"_type": "tag", "name": "items", "path": "/home/kavia/workspace/code-generation/fall-cafe-point-of-sale-system-147283-147292/pos_frontend/src/state/cartContext.js", "pattern": "/^  items: [], \\/\\/ Array of cart items$/", "language": "JavaScript", "kind": "property", "scope": "initialState", "scopeKind": "class"}, {"_type": "tag", "name": "readCartFromSession", "path": "/home/kavia/workspace/code-generation/fall-cafe-point-of-sale-system-147283-147292/pos_frontend/src/state/cartContext.js", "pattern": "/^function readCartFromSession() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "sumLineItemsCents", "path": "/home/kavia/workspace/code-generation/fall-cafe-point-of-sale-system-147283-147292/pos_frontend/src/state/cartContext.js", "pattern": "/^function sumLineItemsCents(items) {$/", "language": "JavaScript", "kind": "function", "signature": "(items)"}, {"_type": "tag", "name": "useCart", "path": "/home/kavia/workspace/code-generation/fall-cafe-point-of-sale-system-147283-147292/pos_frontend/src/state/cartContext.js", "pattern": "/^export function useCart() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "useCartDispatch", "path": "/home/kavia/workspace/code-generation/fall-cafe-point-of-sale-system-147283-147292/pos_frontend/src/state/cartContext.js", "pattern": "/^export function useCartDispatch() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "validateItem", "path": "/home/kavia/workspace/code-generation/fall-cafe-point-of-sale-system-147283-147292/pos_frontend/src/state/cartContext.js", "pattern": "/^function validateItem(item) {$/", "language": "JavaScript", "kind": "function", "signature": "(item)"}, {"_type": "tag", "name": "writeCartToSession", "path": "/home/kavia/workspace/code-generation/fall-cafe-point-of-sale-system-147283-147292/pos_frontend/src/state/cartContext.js", "pattern": "/^function writeCartToSession(state) {$/", "language": "JavaScript", "kind": "function", "signature": "(state)"}], "hash": "468bef7c6ff25cc0ce424b868d03460e", "format-version": 4, "code-base-name": "pos_frontend", "filename": "pos_frontend/src/state/cartContext.js", "fields": [{"name": "ADD_ITEM: 'ADD_ITEM',", "scope": "ACTIONS", "scopeKind": "class", "description": "unavailable"}, {"name": "CLEAR: 'CLEAR',", "scope": "ACTIONS", "scopeKind": "class", "description": "unavailable"}, {"name": "DECREMENT: 'DECREMENT',", "scope": "ACTIONS", "scopeKind": "class", "description": "unavailable"}, {"name": "INCREMENT: 'INCREMENT',", "scope": "ACTIONS", "scopeKind": "class", "description": "unavailable"}, {"name": "REMOVE_ITEM: 'REMOVE_ITEM',", "scope": "ACTIONS", "scopeKind": "class", "description": "unavailable"}, {"name": "SET_NOTE: 'SET_NOTE',", "scope": "ACTIONS", "scopeKind": "class", "description": "unavailable"}, {"name": "<CartStateContext.Provider value={contextValue}>", "scope": "Provider", "scopeKind": "class", "description": "unavailable"}, {"name": "items: [], \\/\\/ Array of cart items", "scope": "initialState", "scopeKind": "class", "description": "unavailable"}], "revision_history": [{"48": "80bc4e4ef7889f63bee39ee9b68241d666e4fb62"}]}